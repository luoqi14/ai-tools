# 开发指南

本文档为 AI 工具集项目的开发指南，帮助开发者快速上手项目开发。

## 🏗️ 开发环境设置

### 系统要求

- **Node.js**: >= 18.0.0 (推荐使用 LTS 版本)
- **Python**: >= 3.8 (推荐 3.10+)
- **Git**: 最新版本
- **IDE**: VS Code (推荐) 或其他支持 TypeScript 的编辑器

### 推荐的 VS Code 插件

```json
{
  "recommendations": [
    "esbenp.prettier-vscode",
    "ms-python.python",
    "bradlc.vscode-tailwindcss",
    "ms-vscode.vscode-typescript-next",
    "ms-python.flake8"
  ]
}
```

## 🎯 项目架构详解

### 前端架构 (Next.js 15)

#### 目录结构说明

```
frontend/src/
├── app/                    # App Router (Next.js 15+)
│   ├── layout.tsx         # 根布局组件
│   ├── page.tsx           # 首页
│   ├── globals.css        # 全局样式
│   └── tools/             # 工具页面目录
├── components/            # 可复用组件
│   ├── ui/               # shadcn/ui基础组件
│   ├── layout/           # 布局相关组件
│   └── tools/            # 工具相关组件
├── lib/                  # 工具函数和配置
│   ├── utils.ts          # 通用工具函数
│   └── api.ts            # API调用封装
└── hooks/                # 自定义React Hooks (如需要)
```

#### 组件设计原则

1. **职责单一**: 每个组件只负责一个功能
2. **可复用**: 通过 props 传递数据，避免硬编码
3. **类型安全**: 使用 TypeScript 定义所有接口
4. **性能优化**: 使用 React 19 新特性，避免不必要的重渲染

#### 样式系统

- **Tailwind CSS**: 原子化 CSS 框架
- **CSS 变量**: 使用 CSS 自定义属性管理主题
- **组件样式**: 通过 className 属性组合样式
- **动画**: Motion 提供流畅动画

### 后端架构 (Flask)

#### 目录结构说明

```
backend/
├── app/                   # Flask应用目录
│   ├── __init__.py       # 应用工厂
│   ├── routes/           # 路由模块
│   │   ├── __init__.py
│   │   ├── main.py       # 主要路由
│   │   └── tools.py      # 工具相关路由
│   ├── models/           # 数据模型 (如需要)
│   ├── services/         # 业务逻辑层
│   └── utils/            # 工具函数
├── config.py             # 配置文件
├── run.py               # 应用启动文件
└── requirements.txt     # Python依赖
```

#### 设计模式

1. **蓝图模式**: 组织路由结构
2. **工厂模式**: 创建应用实例
3. **配置类**: 管理不同环境配置
4. **错误处理**: 统一错误响应格式

## 🔧 开发工作流

### 1. 分支管理

```bash
# 主分支
main              # 生产环境代码
develop          # 开发环境代码

# 功能分支
feature/tool-name    # 新工具开发
feature/ui-update   # UI更新
bugfix/issue-123    # Bug修复
```

### 2. 提交规范

使用 Conventional Commits 规范：

```bash
git commit -m "feat: 添加文本处理工具"
git commit -m "fix: 修复API响应格式问题"
git commit -m "docs: 更新开发文档"
git commit -m "style: 优化磨砂玻璃效果"
```

### 3. 开发流程

1. **创建功能分支**
2. **编写代码和测试**
3. **提交代码**
4. **创建 PR**
5. **代码审查**
6. **合并到 develop**
7. **部署测试**

## 🎨 UI/UX 开发指南

### 设计系统

```css
/* 颜色系统 */
:root {
  --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --glass-bg: rgba(255, 255, 255, 0.1);
  --glass-border: rgba(255, 255, 255, 0.2);
  --text-primary: rgba(255, 255, 255, 1);
  --text-secondary: rgba(255, 255, 255, 0.7);
}
```

### 组件状态设计

```typescript
// 加载状态
interface LoadingState {
  isLoading: boolean;
  error: string | null;
  data: any[] | null;
}

// 交互状态
interface InteractionState {
  isHovered: boolean;
  isPressed: boolean;
  isSelected: boolean;
}
```

### 动画指南

```typescript
// 页面入场动画
const pageVariants = {
  initial: { opacity: 0, y: 20 },
  animate: { opacity: 1, y: 0 },
  exit: { opacity: 0, y: -20 },
};

// 卡片悬停动画
const cardVariants = {
  hover: {
    y: -4,
    scale: 1.02,
    transition: { duration: 0.2 },
  },
};
```

## 🔌 API 开发指南

### RESTful 设计原则

```python
# 资源命名
GET    /api/tools          # 获取工具列表
GET    /api/tools/{id}     # 获取特定工具
POST   /api/tools          # 创建工具
PUT    /api/tools/{id}     # 更新工具
DELETE /api/tools/{id}     # 删除工具
```

### 响应格式标准

```python
# 成功响应
{
    "success": True,
    "data": {},
    "message": "操作成功"  # 可选
}

# 错误响应
{
    "success": False,
    "message": "错误描述",
    "code": "ERROR_CODE"  # 可选
}
```

### 错误处理

```python
from flask import jsonify

def handle_error(error):
    return jsonify({
        'success': False,
        'message': str(error)
    }), 500

@app.errorhandler(404)
def not_found(error):
    return jsonify({
        'success': False,
        'message': '资源不存在'
    }), 404
```

## 🧪 测试指南

### 前端测试

```bash
# 单元测试 (Jest + React Testing Library)
npm run test

# E2E测试 (Playwright)
npm run test:e2e

# 类型检查
npm run type-check
```

### 后端测试

```bash
# 单元测试 (pytest)
cd backend
pytest

# API测试
python -m pytest tests/test_api.py
```

## 📦 部署指南

### 开发环境

```bash
# 前端开发服务器
cd frontend
npm run dev

# 后端开发服务器
cd backend
source venv/bin/activate
python run.py
```

### 生产环境

```bash
# 前端构建
cd frontend
npm run build
npm start

# 后端部署 (Gunicorn)
cd backend
gunicorn -w 4 -b 0.0.0.0:8003 run:app
```

### Docker 部署 (推荐)

```dockerfile
# frontend/Dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build
EXPOSE 3003
CMD ["npm", "start"]

# backend/Dockerfile
FROM python:3.10-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
EXPOSE 8003
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:8003", "run:app"]
```

## 🛠️ 新工具开发

### 1. 后端 API

```python
# backend/app/routes/tools.py
@tools_bp.route('/tools/<tool_id>/process', methods=['POST'])
def process_tool(tool_id):
    data = request.get_json()

    # 工具处理逻辑
    result = process_tool_logic(tool_id, data)

    return jsonify({
        'success': True,
        'data': result
    })
```

### 2. 前端组件

```typescript
// frontend/src/components/tools/TextProcessor.tsx
export default function TextProcessor() {
  const [input, setInput] = useState("");
  const [output, setOutput] = useState("");

  const handleProcess = async () => {
    const result = await api.processText(input);
    setOutput(result);
  };

  return (
    <div className="space-y-4">
      <textarea
        value={input}
        onChange={(e) => setInput(e.target.value)}
        className="w-full p-4 rounded-lg glass-panel"
      />
      <Button onClick={handleProcess}>处理文本</Button>
      <div className="glass-panel p-4 rounded-lg">{output}</div>
    </div>
  );
}
```

## 📋 最佳实践

### 代码质量

1. **TypeScript 严格模式**: 启用所有类型检查
2. **ESLint 规则**: 保持代码风格一致
3. **Prettier 格式化**: 自动代码格式化
4. **代码审查**: 所有 PR 需要审查

### 性能优化

1. **React 优化**: 使用 React 19 特性，避免不必要的重渲染
2. **图片优化**: 使用 Next.js Image 组件
3. **懒加载**: 大型组件使用动态导入
4. **缓存策略**: API 响应缓存

### 安全考虑

1. **输入验证**: 前后端都要验证用户输入
2. **CORS 配置**: 正确配置跨域策略
3. **错误处理**: 不暴露敏感信息
4. **依赖更新**: 定期更新依赖包

---

## 🔗 相关资源

- [Next.js 文档](https://nextjs.org/docs)
- [Flask 文档](https://flask.palletsprojects.com/)
- [Tailwind CSS 文档](https://tailwindcss.com/docs)
- [Motion 文档](https://www.framer.com/motion/)
- [shadcn/ui 文档](https://ui.shadcn.com/)

如有开发问题，请查阅文档或联系项目维护者。
